<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–°—Ç—Ä–∞–Ω–∞ –ß—É–¥–µ—Å ‚Äî —É—Ä–æ–≤–Ω–∏ 1‚Äì3</title>
<style>
  :root{
    --bg:#0b0b0b;
    --text:#d2d2d2;      /* —Å–µ—Ä—ã–π –æ—Å–Ω–æ–≤–Ω–æ–π */
    --accent:#ff69b4;    /* —Ä–æ–∑–æ–≤—ã–π –∞–∫—Ü–µ–Ω—Ç */
    --ok:#59ff9a;
    --err:#ff5566;
    --muted:#9a9a9a;
    --border:#333;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{ margin:0; background:var(--bg); color:var(--text);
        font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
        display:flex; align-items:center; justify-content:center; padding:24px; }
  .crt{ width:min(980px,100%); min-height:80vh; border:2px solid var(--border); border-radius:16px; padding:24px; box-shadow:0 0 40px rgba(255,105,180,.08) inset; }
  .header{ color:var(--accent); margin-bottom:12px; letter-spacing:.06em; }
  .screen{ display:none; animation: fade .2s ease-out; }
  .screen.active{ display:block; }
  @keyframes fade{ from{opacity:.4} to{opacity:1} }
  .type{ white-space:pre-wrap; line-height:1.45; min-height:140px; }
  .btn{ background:#141414; color:var(--accent); border:1px solid var(--accent); padding:10px 16px; border-radius:10px; cursor:pointer; font:inherit; }
  .btn:disabled{ opacity:.6; cursor:not-allowed; }
  .muted{ color:var(--muted); }
  hr{ border:none; border-top:1px solid var(--border); margin:16px 0; }

  /* LEVEL 1 (—Å–∏–º–≤–æ–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞) */
  .symbols{ display:flex; gap:10px; margin:12px 0; }
  .symbol{ width:56px; height:56px; display:flex; align-items:center; justify-content:center; font-size:28px; border:2px solid var(--accent); background:#121212; border-radius:10px; cursor:pointer; user-select:none; }

  /* LEVEL 2 (–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ —á–∞—è) */
  table{ border-collapse:collapse; width:100%; max-width:640px; }
  th, td{ border:1px solid var(--border); padding:10px; text-align:center; }
  th{ color:var(--accent); font-weight:600; }
  select{ background:#121212; color:var(--text); border:1px solid var(--accent); border-radius:8px; padding:6px; font:inherit; }

  /* LEVEL 3 (–ª–∞–±–∏—Ä–∏–Ω—Ç) */
  .maze{ border-collapse:collapse; margin:8px 0; }
  .maze td{ width:50px; height:50px; border:1px solid var(--border); cursor:pointer; text-align:center; font-size:22px; }
  .path{ background:#112d11; }
  .wrong{ background:#2d1111; }
  #timer{ color:#ffd166; margin:6px 0; }

  details{ border:1px solid var(--border); border-radius:10px; padding:10px; margin:10px 0; background:#0f0f0f; }
  summary{ color:var(--accent); cursor:pointer; }
</style>
</head>
<body>
<div class="crt">
  <div class="header">WONDERLAND// VIVINOS TERMINAL EMULATOR</div>

  <!-- SCREEN 1: index -->
  <section id="s1" class="screen active">
    <div class="type" id="t1"></div>
    <div id="c1"></div>
  </section>

  <!-- SCREEN 2: LEVEL 1 (–ø–µ—Ä–≤–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞) -->
  <section id="s2" class="screen">
    <div class="type" id="t2"></div>
    <div id="lvl1" style="opacity:.35; pointer-events:none;">
      <div class="symbols" id="symbols"></div>
      <button class="btn" id="btnCheck1">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <div id="msg1" class="muted"></div>
    </div>
  </section>

  <!-- SCREEN 3: STORY 1 -->
  <section id="s3" class="screen">
    <div class="type" id="t3"></div>
    <div id="c3"></div>
  </section>

  <!-- SCREEN 4: LEVEL 2 (–ª–æ–≥–∏–∫–∞ —á–∞–µ–ø–∏—Ç–∏—è) -->
  <section id="s4" class="screen">
    <div class="type" id="t4"></div>
    <div id="lvl2" style="opacity:.35; pointer-events:none;">
      <table>
        <tr><th>–ì–æ—Å—Ç—å</th><th>–ß–∞–π</th></tr>
        <tr><td>–ë–µ–ª—ã–π –∫—Ä–æ–ª–∏–∫</td><td><select id="guest1"><option value="">---</option><option>–ú—è—Ç–Ω—ã–π</option><option>–ß–µ—Ä–Ω—ã–π</option><option>–Ø–≥–æ–¥–Ω—ã–π</option><option>–õ–∏–º–æ–Ω–Ω—ã–π</option><option>–ó–µ–ª–µ–Ω—ã–π</option></select></td></tr>
        <tr><td>–ß–µ—à–∏—Ä—Å–∫–∏–π –∫–æ—Ç</td><td><select id="guest2"><option value="">---</option><option>–ú—è—Ç–Ω—ã–π</option><option>–ß–µ—Ä–Ω—ã–π</option><option>–Ø–≥–æ–¥–Ω—ã–π</option><option>–õ–∏–º–æ–Ω–Ω—ã–π</option><option>–ó–µ–ª–µ–Ω—ã–π</option></select></td></tr>
        <tr><td>–ö–æ—Ä–æ–ª–µ–≤–∞</td><td><select id="guest3"><option value="">---</option><option>–ú—è—Ç–Ω—ã–π</option><option>–ß–µ—Ä–Ω—ã–π</option><option>–Ø–≥–æ–¥–Ω—ã–π</option><option>–õ–∏–º–æ–Ω–Ω—ã–π</option><option>–ó–µ–ª–µ–Ω—ã–π</option></select></td></tr>
        <tr><td>–ë–µ–∑—É–º–Ω—ã–π –®–ª—è–ø–Ω–∏–∫</td><td><select id="guest4"><option value="">---</option><option>–ú—è—Ç–Ω—ã–π</option><option>–ß–µ—Ä–Ω—ã–π</option><option>–Ø–≥–æ–¥–Ω—ã–π</option><option>–õ–∏–º–æ–Ω–Ω—ã–π</option><option>–ó–µ–ª–µ–Ω—ã–π</option></select></td></tr>
        <tr><td>–ú–∞—Ä—Ç–æ–≤—Å–∫–∏–π –ó–∞—è—Ü</td><td><select id="guest5"><option value="">---</option><option>–ú—è—Ç–Ω—ã–π</option><option>–ß–µ—Ä–Ω—ã–π</option><option>–Ø–≥–æ–¥–Ω—ã–π</option><option>–õ–∏–º–æ–Ω–Ω—ã–π</option><option>–ó–µ–ª–µ–Ω—ã–π</option></select></td></tr>
      </table>
      <button class="btn" id="btnCheck2">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <div id="msg2" class="muted"></div>
    </div>
  </section>

  <!-- SCREEN 5: STORY 2 -->
  <section id="s5" class="screen">
    <div class="type" id="t5"></div>
    <div id="c5"></div>
  </section>

  <!-- SCREEN 6: LEVEL 3 (–ª–∞–±–∏—Ä–∏–Ω—Ç) -->
  <section id="s6" class="screen">
    <div class="type" id="t6"></div>
    <div id="lvl3" style="opacity:.35; pointer-events:none;">
      <div id="timer"></div>
      <table class="maze" id="maze"></table>
      <div id="msg3" class="muted"></div>
    </div>
  </section>

  <!-- SCREEN 7: STORY 3 (—Ñ–∏–Ω–∞–ª –±–ª–æ–∫–∞) -->
  <section id="s7" class="screen">
    <div class="type" id="t7"></div>
    <div id="c7"></div>
  </section>

  <!-- SCREEN 8: –î–ù–ï–í–ù–ò–ö–ò –ê–õ–ò–°–´ -->
  <section id="s8" class="screen">
    <h2 style="color:var(--accent); margin-top:0;">–î–ù–ï–í–ù–ò–ö–ò –ê–õ–ò–°–´</h2>
    <div id="diaries"></div>
  </section>
</div>

<script>
// ---------- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏ ----------
const text1 = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –°—Ç—Ä–∞–Ω—É –ß—É–¥–µ—Å.\n–¢–µ–ø–µ—Ä—å —Ç—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ù–∏–∫—Ç–æ –Ω–µ –æ–±–∏–¥–∏—Ç —Ç–µ–±—è.\n–°–ª–µ–¥—É–π –∑–∞ –∫—Ä–æ–ª–∏–∫–æ–º –∏ –≤—Å–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ.\n\n–ï—Å–ª–∏ –≤–∞—Å —Ç—É—Ç —Ç—Ä–æ–µ, –Ω–∞–∂–º–∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`;

const pre2 = `–¢–µ–±–µ –Ω–∞–¥–æ –æ—Å–≤–æ–∏—Ç—å—Å—è –≤ –°—Ç—Ä–∞–Ω–µ –ß—É–¥–µ—Å –∏ –Ω–∞—É—á–∏—Ç—å—Å—è –∑–¥–µ—Å—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å. –í—Å–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ!`;

const text3 = `–ß–µ–º –≤–∞—Å –±–æ–ª—å—à–µ –≤ –°—Ç—Ä–∞–Ω–µ –ß—É–¥–µ—Å ‚Äì —Ç–µ–º –ª—É—á—à–µ –≤–∞–º –±—É–¥–µ—Ç —Ç—É—Ç!\n\n‚Äú–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –°—Ç—Ä–∞–Ω–∞ –ß—É–¥–µ—Å? –≠—Ç–æ –º–µ—Å—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –ù–∞—Å—Ç—É–ø–∞—é—â–µ–≥–æ –®—Ç–æ—Ä–º–∞ –≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã VIVINOS.\n–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏—Å—Ç–µ–º–∞ VIVINOS? \n–≠—Ç–æ —Å—É–ø–µ—Ä–∫–æ–º–ø—å—é—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é –û–≤–µ—Ä–ª–æ—Ä–¥–æ–≤. –ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ –æ–Ω–∏ –ø—Ä–∏—à–ª–∏ –∏–∑ –¥—Ä—É–≥–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏. –¢–∞–∫–æ–π –∂–µ –ó–µ–º–ª–∏ –∫–∞–∫ –Ω–∞—à–∞? –ù–∞–≤–µ—Ä–Ω–æ–µ, –≤–µ–¥—å —è –∑–Ω–∞—é, —á—Ç–æ –æ–Ω–∏ ‚Äì –ª—é–¥–∏. –†–µ–¥–∫–∏–π –ì—Ä–∞–Ω–∏—Ç —Å–Ω—è–ª –ø–µ—Ä–µ–¥–æ –º–Ω–æ–π –º–∞—Å–∫—É, –ø–æ–∫–∞–∑–∞–ª —Å–≤–æ–µ –ª–∏—Ü–æ ‚Äì –æ–Ω –æ–±—ã—á–Ω—ã–π —Å—Ç–∞—Ä–∏–∫. –Ø —Å–∫–∞–∑–∞–ª–∞ –æ–± —ç—Ç–æ–º –î–µ–ª—å –°–æ–ª –∏ –º—ã –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –≤–º–µ—Å—Ç–µ —Ä–∞—Å–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–¥—É ‚Ä¶‚Äù \n\n‚Äú–ü–∏—Ç–æ–º–µ—Ü –ê–ª–º–∞–∑–∞‚Ä¶ –±–æ–ª—å—à–µ, —á–µ–º –ø–∏—Ç–æ–º–µ—Ü. –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç–æ—á–Ω—ã–µ. –ê–ª–º–∞–∑ –æ—Ç–Ω–æ—Å–∏–ª—Å—è –∫ –Ω–µ–º—É –∫–∞–∫ –∫ –ª—é–±–æ–≤–Ω–∏–∫—É. –ú–æ–∂–µ—Ç, –∏ –ª—é–±–∏–ª. –ò –≤–∑—Ä–µ–≤–Ω–æ–≤–∞–ª, –∫–æ–≥–¥–∞ –†–∞–¥–∂–∞ –Ω–∞—á–∞–ª–∏ –ª—é–±–∏—Ç—å –≤—Å–µ. –ù–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è. –ó–∞–±–∏–ª, –∫–∞–∫ –∑–≤–µ—Ä—å. –£–º–µ—é—Ç –ª–∏ –û–≤–µ—Ä–ª–æ—Ä–¥—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å—Å—è? –ë—ã–ª–æ –ª–∏ –ê–ª–º–∞–∑—É –±–æ–ª—å–Ω–æ?‚Äù\n\n‚Äú–ü–æ–ø—ã—Ç–∫–∞ –æ—Ü–∏—Ñ—Ä–æ–≤–∞—Ç—å –≤—Å–µ –µ—â–µ –Ω–µ—É—Å–ø–µ—à–Ω—ã—ã–µ. –°–æ–∑–Ω–∞–Ω–∏–µ –ù–∞–Ω—ã –ø–æ–≥–ª–æ—Ç–∏—Ç—å –Ω–µ —É–¥–∞–ª–æ—Å—å, –Ω–æ –æ–Ω–∞ —Ç–∞–∫ —Ö–æ—Ç–µ–ª–∞ –ø–æ–±–µ–¥–∏—Ç—å. –°–æ–∑–Ω–∞–Ω–∏–µ –ö–∞—Ç—Ü–µ —Å–º—É—Ç–Ω–æ–µ ‚Äî –∫–∞–∫ –ø—Ä–∏ –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏–∏. –ú—ã—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å –Ω–µ –≤—ã—à–ª–æ. –ü—Ä–æ–¥–æ–ª–∂–∞—é —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã.‚Äù\n\n–ï—Å–ª–∏ –≤–∞—Å —Ç—É—Ç —á–µ—Ç–≤–µ—Ä–æ, –Ω–∞–∂–º–∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`;

const pre4 = `–ù–∞—à–∞ —Å —Ç–æ–±–æ–π –≤—Ç–æ—Ä–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞.
–ò—Å–ø–æ–ª—å–∑—É–π –≤–æ—Ç —ç—Ç–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏.

–ë–µ–ª—ã–π –∫—Ä–æ–ª–∏–∫ –Ω–µ –ø—å–µ—Ç —á–µ—Ä–Ω—ã–π —á–∞–π. –ë–µ–ª—ã–π –∫—Ä–æ–ª–∏–∫ –Ω–µ –ø—å–µ—Ç —è–≥–æ–¥–Ω—ã–π —á–∞–π, –µ—Å–ª–∏ –ß–µ—à–∏—Ä—Å–∫–∏–π –∫–æ—Ç –Ω–µ –ø—å–µ—Ç –∑–µ–ª–µ–Ω—ã–π.

–ß–µ—à–∏—Ä—Å–∫–∏–π –∫–æ—Ç –ø—å–µ—Ç —á–∞–π, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∑–µ–ª–µ–Ω—ã–π –∏ –Ω–µ –º—è—Ç–Ω—ã–π.

–õ–∏–º–æ–Ω–Ω—ã–π —á–∞–π –ø—å–µ—Ç –ú–∞—Ä—Ç–æ–≤—Å–∫–∏–π –ó–∞—è—Ü.

–ë–µ–∑—É–º–Ω—ã–π –®–ª—è–ø–Ω–∏–∫ –Ω–µ –ø—å–µ—Ç –º—è—Ç–Ω—ã–π —á–∞–π, –µ—Å–ª–∏ –ö–æ—Ä–æ–ª–µ–≤–∞ –ø—å–µ—Ç –∑–µ–ª–µ–Ω—ã–π.

–ö–æ—Ä–æ–ª–µ–≤–∞ –ø—å–µ—Ç –Ω–µ —è–≥–æ–¥–Ω—ã–π —á–∞–π. –ö–æ—Ä–æ–ª–µ–≤–∞ –ø—å–µ—Ç –Ω–µ —á–µ—Ä–Ω—ã–π —á–∞–π, –µ—Å–ª–∏ –ß–µ—à–∏—Ä—Å–∫–∏–π –∫–æ—Ç –ø—å–µ—Ç –∑–µ–ª–µ–Ω—ã–π.`;

const text5 = `–°–∏—Å—Ç–µ–º–∞ VIVINOS –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –∫–∞–∂–¥–æ–º—É –û–≤–µ—Ä–ª–æ—Ä–¥—É –∏ –ø–∏—Ç–æ–º—Ü—É. –û–Ω–∞ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è –æ—Ç —ç–º–æ—Ü–∏–π. –ü–æ—ç—Ç–æ–º—É –∏–º –Ω—É–∂–Ω—ã –º—ã - –æ–Ω–∏ –∂–µ –¥–∞–≤–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ —á—É–≤—Å—Ç–≤—É—é—Ç ‚Ä¶ –∏–º –≤—Å–µ–º —Å–æ—Ç–Ω–∏ –ª–µ—Ç ‚Ä¶ –æ–ø—ã—Ç—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∏ –∏—Ö –≤ –º–æ–Ω—Å—Ç—Ä–æ–≤ ‚Ä¶\n\n–î–ª—è —ç—Ç–æ–≥–æ –∏ –Ω—É–∂–µ–Ω Alien Stage! –ö–∞–∂–¥—ã–π –≥–æ–¥ —Å–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º –º–∏—Ä–æ–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –Ω–∞—à–µ–º –º–∏—Ä–µ ‚Ä¶ –ø–æ—Ä–∞–±–æ—â–∞—Ç—å –∏—Ö ‚Ä¶\n\n–î–µ–ª—å –°–æ–ª ‚Ä¶ —è –ª—é–±–∏–ª–∞ –µ—ë ‚Ä¶ –ø–æ—á–µ–º—É –æ–Ω–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∞–ª–∞ –º–µ–Ω—è? –ù–∞–≤–µ—Ä–Ω–æ–µ –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–Ω–∞ –∑–Ω–∞–ª–∞ ‚Äì —á—Ç–æ –ø–æ–±–µ–¥–∏—Ç—å –û–≤–µ—Ä–ª–æ—Ä–¥–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ ‚Ä¶\n\n–í—ã –º–æ–∂–µ—Ç–µ —Å–ª—ã—à–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–∏—Ä–µ. –í—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å–æ —Å–≤–æ–∏–º–∏ –¥—Ä—É–∑—å—è–º–∏ —á–µ—Ä–µ–∑ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä—ã. –ù–æ –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã ‚Äì –û–≤–µ—Ä–ª–æ—Ä–¥—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å –ø—Ä–æ –°—Ç—Ä–∞–Ω—É –ß—É–¥–µ—Å. \n\n–ú–æ–∏ –ø–µ—Ä–≤—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —á—Ç–æ-—Ç–æ –æ—Ü–∏—Ñ—Ä–æ–≤–∞—Ç—å‚Ä¶ –ø—Ä–æ–≤–∞–ª—å–Ω—ã–µ. –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å –∏–∑–≤–Ω–µ. –≠—Ç–æ—Ç –º–∞–ª—å—á–∏–∫, –†–µ–Ω‚Ä¶ –æ–Ω –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–ª—ã–±–∞–ª—Å—è –ù–∞–Ω–µ. –Ø –ø–æ—á—Ç–∏ –ø–æ–¥—Ü–µ–ø–∏–ª–∞ –µ–≥–æ —Å–æ–∑–Ω–∞–Ω–∏–µ, –æ–Ω —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –µ–µ –ª—é–±–∏–ª‚Ä¶ —Ç–∞–∫ –∂–µ–ª–∞–ª –µ–π –ø–æ–±–µ–¥—ã.\n\n–ï–≥–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –º—ã—Å–ª–∏. –ù–∞–Ω–∞ ‚Ä¶ —è —Å–¥–µ–ª–∞—é –≤—Å–µ –¥–ª—è —Ç–µ–±—è. –ö–∞—Ç—Ü–µ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—Å—è –æ —Ç–µ–±—è, —è —É–≤–µ—Ä–µ–Ω, –æ–Ω –∂–µ –º–æ–π –¥—Ä—É–≥. –¢—ã –Ω–µ –±—É–¥–µ—à—å –æ–¥–Ω–∞‚Äù.\n\n–ï—Å–ª–∏ –≤–∞—Å —Ç—É—Ç –ø—è—Ç–µ—Ä–æ, –Ω–∞–∂–º–∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`;

const pre6 = `–ù–∞—à–∞ —Ç—Ä–µ—Ç—å—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞. –°–ª–µ–¥—É–π –∑–∞ –∫—Ä–æ–ª–∏–∫–æ–º –ø–æ –∫–ª–µ—Ç–∫–∞–º. –û—à–∏–±–∫–∞ ‚Äî —Ç–∞–π–º-–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥.`;

const text7 = `–°—Ç—Ä–∞–Ω–∞ –ß—É–¥–µ—Å ‚Äì –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ. –Ø —Å–º–æ–≥—É –æ—Ü–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ç–µ—Ö, –∫—Ç–æ —É–º—Ä–µ—Ç –Ω–∞ —Å—Ü–µ–Ω–µ. –ê –ø–æ—Ç–æ–º –º–æ–∂–µ—Ç –∏ –≤—Å–µ—Ö, –∫—Ç–æ —É–º–∏—Ä–∞–µ—Ç ‚Ä¶ –Ø –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∞—Å—å —Å –®–µ–π–¥–æ–º. –û–Ω —Å–∫–∞–∑–∞–ª, —á—Ç–æ –æ–Ω —Ç–∞–∫–æ–π - –æ—Ü–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ–ª–æ–≤–µ–∫. –û–Ω –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ –º–æ–µ–º—É —á–∏–ø—É –∏ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞–ª –≤–æ –≤—Ä–µ–º—è Alien Stage. –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ—ç—Ç–æ–º—É —è —Å–º–æ–≥–ª–∞ –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏ –æ—Å—Ç–∞—Ç—å—Å—è ‚Ä¶ —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ –æ–Ω?\n\n–¢–µ–ø–µ—Ä—å —è ‚Äì –ë–µ–ª—ã–π –ö—Ä–æ–ª–∏–∫. –ò—â—É —Å–ø–æ—Å–æ–±—ã —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø–∏—Ç–æ–º—Ü–∞–º–∏, –Ω–æ —á–∏–ø—ã –∏—Ö –∑–∞—â–∏—â–µ–Ω—ã, –∞ —è –Ω–µ –®–µ–π–¥, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ ‚Ä¶ \n\n–ì–æ–¥–∞–º–∏ —è –∏—Å–∫–∞–ª–∞ —Ç—É—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ö–∞–∫ –ø–æ–±–µ–¥–∏—Ç—å –û–≤–µ—Ä–ª–æ—Ä–¥–æ–≤. –ò —è –ø–æ–Ω—è–ª–∞, —á—Ç–æ —ç—Ç–æ ‚Ä¶ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.\n\n–°–∏—Å—Ç–µ–º—É VIVINOUS –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–¥–æ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞ –æ—Ç –≥–ª–∞–≤—ã –°–æ–≤–µ—Ç–∞ ‚Äì –ê–º–µ—Ç—Ä–∏–Ω–∞, –∏ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤–æ –≤—Ä–µ–º—è Alien Stage, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–ª—É—Ñ–∏–Ω–∞–ª–∞. –≠—Ç–æ –∂–µ –Ω–µ—Ä–µ–∞–ª—å–Ω–æ, –¥–∞? –ü–æ—ç—Ç–æ–º—É —Ç–æ–ª—å–∫–æ –°—Ç—Ä–∞–Ω–∞ –ß—É–¥–µ—Å, —Å—á–∞—Å—Ç–ª–∏–≤–∞—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–ø–∞—Å–µ—Ç –≤—Å–µ—Ö\n\n–ö–∞–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω—É–∂–Ω–∞, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å VIVINOS? –ò–ú–ï–ù–ï–ú –Ø–ù–¢–ê–†–Ø. \n\n–ù–æ –∑–∞—á–µ–º —ç—Ç–æ? –í–µ–¥—å –°—Ç—Ä–∞–Ω–∞ –ß—É–¥–µ—Å –Ω–µ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –±–µ–∑ VIVINOS. –í—Å–µ –∫—Ç–æ –∑–¥–µ—Å—å ‚Äî —É–º—Ä—É—Ç. \n\n–°–∞—Ä–∞, —è —Ç–∞–∫ –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è –∑–¥–µ—Å—å. –ú—ã –±—É–¥–µ–º —Å—á–∞—Å—Ç–ª–∏–≤—ã!\n\n–ï—Å–ª–∏ –≤–∞—Å —Ç—É—Ç —à–µ—Å—Ç–µ—Ä–æ, –Ω–∞–∂–º–∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`;

// ---------- –£—Ç–∏–ª–∏—Ç—ã ----------
function typeText(el, text, speed=18){
  return new Promise(resolve=>{
    el.textContent = '';
    let i=0; const id=setInterval(()=>{
      el.textContent += text[i++];
      if(i>=text.length){ clearInterval(id); resolve(); }
    }, speed);
  });
}
function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function makeContinue(containerId, next){
  const c = document.getElementById(containerId);
  const btn = document.createElement('button');
  btn.className='btn'; btn.textContent='–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å';
  btn.onclick=()=>{ showScreen(next); runScreen(next); };
  c.innerHTML=''; c.appendChild(btn);
}

// ---------- Level 1 ----------
const lvl1Container = document.getElementById('lvl1');
const symbolsContainer = document.getElementById('symbols');
const msg1 = document.getElementById('msg1');
const btnCheck1 = document.getElementById('btnCheck1');
const correctOrder1 = ['üêá','üò∫','ü´ñ','üï∞Ô∏è','‚ôõ'];
let arr1 = [];
function renderSymbols(){
  symbolsContainer.innerHTML='';
  arr1.forEach((sym, i)=>{
    const d=document.createElement('div');
    d.className='symbol'; d.textContent=sym;
    d.title='–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–¥–≤–∏–Ω—É—Ç—å –≤–ø—Ä–∞–≤–æ';
    d.onclick=()=>{ if(i < arr1.length-1){ [arr1[i], arr1[i+1]]=[arr1[i+1],arr1[i]]; renderSymbols(); } };
    symbolsContainer.appendChild(d);
  });
}
btnCheck1.addEventListener('click', ()=>{
  if(arr1.join('') === correctOrder1.join('')){
    msg1.style.color = getComputedStyle(document.documentElement).getPropertyValue('--ok');
    msg1.textContent = '–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! ‚Üí';
    setTimeout(()=>{ showScreen('s3'); runScreen('s3'); }, 500);
  } else {
    msg1.style.color='var(--err)'; msg1.textContent='–ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
  }
});

// ---------- Level 2 ----------
const msg2 = document.getElementById('msg2');
const btnCheck2 = document.getElementById('btnCheck2');
const correctPairs = {
  '–ë–µ–ª—ã–π –∫—Ä–æ–ª–∏–∫': '–ó–µ–ª–µ–Ω—ã–π',
  '–ß–µ—à–∏—Ä—Å–∫–∏–π –∫–æ—Ç': '–Ø–≥–æ–¥–Ω—ã–π',
  '–ö–æ—Ä–æ–ª–µ–≤–∞': '–ß–µ—Ä–Ω—ã–π',
  '–ë–µ–∑—É–º–Ω—ã–π –®–ª—è–ø–Ω–∏–∫': '–ú—è—Ç–Ω—ã–π',
  '–ú–∞—Ä—Ç–æ–≤—Å–∫–∏–π –ó–∞—è—Ü': '–õ–∏–º–æ–Ω–Ω—ã–π'
};
btnCheck2.addEventListener('click', ()=>{
  let ok=true; const rows=[1,2,3,4,5];
  rows.forEach((i)=>{
    const guest = document.querySelector(`#s4 table tr:nth-child(${i+1}) td:first-child`).textContent;
    const val = document.getElementById(`guest${i}`).value;
    if(val !== correctPairs[guest]) ok=false;
  });
  if(ok){
    msg2.style.color='var(--ok)'; msg2.textContent='–ß–∞–µ–ø–∏—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! ‚Üí';
    setTimeout(()=>{ showScreen('s5'); runScreen('s5'); }, 500);
  } else { msg2.style.color='var(--err)'; msg2.textContent='–ß—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —É—Å–ª–æ–≤–∏—è.'; }
});

// ---------- Level 3 ----------
const mazeRows=5, mazeCols=5;
const correctPath = [[0,0],[1,0],[1,1],[2,1],[3,1],[3,2],[4,2],[4,3],[4,4]];
let step=0, canClick=true, intervalId=null, countdown=0;
function renderMaze(){
  const tbl=document.getElementById('maze'); tbl.innerHTML='';
  for(let r=0;r<mazeRows;r++){
    const tr=document.createElement('tr');
    for(let c=0;c<mazeCols;c++){
      const td=document.createElement('td'); td.id=`cell-${r}-${c}`; td.textContent='';
      td.onclick=()=>onCell(r,c); tr.appendChild(td);
    } tbl.appendChild(tr);
  }
}
function clearMazeVisual(){
  document.querySelectorAll('#maze td').forEach(td=>{ td.classList.remove('path','wrong'); td.textContent=''; });
}
function onCell(r,c){
  if(!canClick) return; const msg=document.getElementById('msg3');
  if(r===correctPath[step][0] && c===correctPath[step][1]){
    const cell = document.getElementById(`cell-${r}-${c}`);
    cell.classList.add('path');
    cell.textContent = 'üêá';
    step++;
    if(step===correctPath.length){ msg.style.color='var(--ok)'; msg.textContent='–í—ã –≤—ã–±—Ä–∞–ª–∏—Å—å –∏–∑ –Ω–æ—Ä—ã! ‚Üí'; setTimeout(()=>{ showScreen('s7'); runScreen('s7'); },600); }
  } else {
    clearMazeVisual();
    step=0; const wrongCell=document.getElementById(`cell-${r}-${c}`); wrongCell.classList.add('wrong');
    msg.style.color='var(--err)'; msg.textContent='–¢—É–ø–∏–∫. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥‚Ä¶';
    canClick=false; countdown=30; const timer=document.getElementById('timer'); timer.textContent=`–¢–∞–π–º–µ—Ä: ${countdown}s`;
    intervalId=setInterval(()=>{ countdown--; timer.textContent=`–¢–∞–π–º–µ—Ä: ${countdown}s`; if(countdown<=0){ clearInterval(intervalId); intervalId=null; canClick=true; timer.textContent=''; msg.textContent=''; clearMazeVisual(); } },1000);
  }
}

// ---------- –î–∏–∞–ª–æ–≥–∏ / –î–Ω–µ–≤–Ω–∏–∫–∏ ----------
function fillDiaries(){
  const d = document.getElementById('diaries'); d.innerHTML='';
  const items = [
    {title:'–°—Ç—Ä–∞–Ω–∏—Ü–∞ 3', content:text3.replace(/\n–ï—Å–ª–∏ –≤–∞—Å —Ç—É—Ç —á–µ—Ç–≤–µ—Ä–æ, –Ω–∞–∂–º–∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å$/,'')},
    {title:'–°—Ç—Ä–∞–Ω–∏—Ü–∞ 5', content:text5.replace(/\n–ï—Å–ª–∏ –≤–∞—Å —Ç—É—Ç –ø—è—Ç–µ—Ä–æ, –Ω–∞–∂–º–∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å$/,'')},
    {title:'–°—Ç—Ä–∞–Ω–∏—Ü–∞ 7', content:text7.replace(/\n–ï—Å–ª–∏ –≤–∞—Å —Ç—É—Ç —à–µ—Å—Ç–µ—Ä–æ, –Ω–∞–∂–º–∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å$/,'')},
  ];
  items.forEach(it=>{
    const details=document.createElement('details');
    const summary=document.createElement('summary'); summary.textContent=it.title;
    const p=document.createElement('pre'); p.style.whiteSpace='pre-wrap'; p.textContent=it.content;
    details.appendChild(summary); details.appendChild(p); d.appendChild(details);
  });
}

// ---------- –†–∞–Ω–Ω–µ—Ä —ç–∫—Ä–∞–Ω–æ–≤ ----------
async function runScreen(id){
  if(id==='s1'){ await typeText(document.getElementById('t1'), text1); makeContinue('c1','s2'); }

  if(id==='s2'){
    await typeText(document.getElementById('t2'), pre2+"\n\n");
    lvl1Container.style.opacity='1'; lvl1Container.style.pointerEvents='auto';
    arr1=[...correctOrder1].sort(()=>Math.random()-0.5); renderSymbols();
  }

  if(id==='s3'){ await typeText(document.getElementById('t3'), text3); makeContinue('c3','s4'); }

  if(id==='s4'){
    await typeText(document.getElementById('t4'), pre4+"\n\n");
    document.getElementById('lvl2').style.opacity='1'; document.getElementById('lvl2').style.pointerEvents='auto';
  }

  if(id==='s5'){ await typeText(document.getElementById('t5'), text5); makeContinue('c5','s6'); }

  if(id==='s6'){
    await typeText(document.getElementById('t6'), pre6+"\n\n");
    document.getElementById('lvl3').style.opacity='1'; document.getElementById('lvl3').style.pointerEvents='auto';
    renderMaze();
  }

  if(id==='s7'){ await typeText(document.getElementById('t7'), text7); makeContinue('c7','s8'); }

  if(id==='s8'){ fillDiaries(); }
}

// —Å—Ç–∞—Ä—Ç—É–µ–º
runScreen('s1');
</script>
</body>
</html>
