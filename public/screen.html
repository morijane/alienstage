<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Scoreboard</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: space-around;
    align-items: center;
    background-color: #222;
    font-family: 'Arial', sans-serif;
    color: #11cabc;
  }
  .player {
    border: 3px solid #11cabc;
    padding: 50px;
    border-radius: 20px;
    text-align: center;
    width: 30%;
    box-shadow: 0 0 20px #11cabc;
    transition: box-shadow 0.5s, transform 0.5s;
  }
  .name {
    font-size: 3em;
    margin-bottom: 20px;
  }
  .score {
    font-size: 5em;
    font-weight: bold;
    transition: color 0.5s, transform 0.5s;
  }
  .highlight {
    color: #fff;
    transform: scale(1.3);
    box-shadow: 0 0 40px #11cabc;
  }
</style>
</head>
<body>
  <div class="player" id="player1">
    <div class="name">Игрок 1</div>
    <div class="score" id="score1">0</div>
  </div>
  <div class="player" id="player2">
    <div class="name">Игрок 2</div>
    <div class="score" id="score2">0</div>
  </div>

<script>
  const channel = new BroadcastChannel('score_channel');

  let prevScores = { score1: 0, score2: 0 };

  channel.onmessage = (event) => {
    const data = event.data;

    // Обновляем имена
    document.getElementById('player1').querySelector('.name').textContent = data.name1;
    document.getElementById('player2').querySelector('.name').textContent = data.name2;

    // Обновляем очки с анимацией
    updateScore('score1', data.score1);
    updateScore('score2', data.score2);
  };

  function updateScore(id, newScore) {
    const scoreEl = document.getElementById(id);
    const prevScore = prevScores[id];

    if (newScore !== prevScore) {
      scoreEl.textContent = newScore;
      scoreEl.classList.add('highlight');

      setTimeout(() => {
        scoreEl.classList.remove('highlight');
      }, 500);

      prevScores[id] = newScore;
    }
  }
</script>
</body>
</html>
